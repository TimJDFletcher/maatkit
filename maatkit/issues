#!/usr/bin/env python

import gdata.projecthosting.client
import gdata.projecthosting.data
import gdata.gauth
import gdata.client
import gdata.data
import atom.http_core
import atom.core

# Get open issues (max 500)
client = gdata.projecthosting.client.ProjectHostingClient()
query  = gdata.projecthosting.client.Query(canned_query='open', max_results=500)
issues = client.get_issues('maatkit', query=query)

print "%d open issues" % len(issues.entry)

for issue in issues.entry:

    # id.text is like
    #   http://code.google.com/feeds/issues/p/maatkit/issues/full/123"
    # so right-split the id number off the end
    id = issue.id.text.rsplit('/', 1)

    print "Issue %s: %s" % (id[1], issue.title.text)

    print "\tstatus: %s" % issue.status.text

    for a in issue.author:
        print "\treporter: %s" % a.name.text

    if issue.owner:
        print "\towner: %s" % issue.owner.username.text
    else:
        print "\towner: ----";

    for label in issue.label:
        print "\tlabel: %s" % label.text

exit
